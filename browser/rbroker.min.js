/*!
 * `rbroker` JavaScript Client Library v7.4.0
 * http://deployr.revolutionanalytics.com/documents/dev/rbroker-jsdoc
 *
 * Copyright (C) 2010-2015 by Revolution Analytics Inc.
 * Released under the Apache License 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Includes:
 *   - superagent: https://github.com/visionmedia/superagent
 *   - ws: https://github.com/einaros/ws
 *   - D.js: http://malko.github.io/D.js
 *   - yui-lang.js: https://github.com/yui/yui3 (DeployR port)
 *
 * superagent
 *
 * Copyright (c) 2014-2015 TJ Holowaychuk <tj@vision-media.ca>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * ws
 *
 * Copyright (c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files 
 * (the "Software"), to deal in the Software without restriction, 
 * including without limitation the rights to use, copy, modify, merge
 * publish, distribute, sublicense, and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, 
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * D
 *
 * Copyright (C) 2013 Jonathan Gotti <jgotti at jgotti dot net>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * selfish
 *
 * Copyright 2011 Irakli Gozalishvili. All rights reserved
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * yui-lang
 *
 * The lang component is a DeployR port of yui-lang.js by Yahoo!
 *
 * Software License Agreement (BSD License)
 * Copyright (c) 2013, Yahoo! Inc. All rights reserved.
 *
 * Redistribution and use of this software in source and binary forms, 
 * with or without modification, are permitted provided that the 
 * following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer. Redistributions
 * in binary form must reproduce the above copyright notice, this list of
 * conditions and  the following disclaimer in the documentation and/or 
 * other materials provided with the distribution.
 * 
 * Neither the name of Yahoo! Inc. nor the names of YUI's contributors 
 * may be used to endorse or promote products derived from this software 
 * without specific prior written permission of Yahoo! Inc.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT 
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR 
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT 
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT 
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY 
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT, 
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE 
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Date: 2015-07-13
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.rbroker=e()}}(function(){var e;return function t(e,r,i){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return o(r?r:t)},l,l.exports,t,e,r,i)}return r[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,r){var i=e("./lib/task/discreate-task"),o=e("./lib/task/pooled-task"),n=e("./lib/task/background-task"),s=e("./lib/engine/discrete-task-broker"),a=e("./lib/engine/pooled-task-broker"),u=e("./lib/engine/background-task-broker");"undefined"==typeof window||window.deployr||(window.deployr=e("deployr")),t.exports={discreteTaskBroker:function(e){return s["new"](e)},pooledTaskBroker:function(e){return a["new"](e)},backgroundTaskBroker:function(e){return u["new"](e)},discreteTask:function(e){return i["new"](e)},pooledTask:function(e){return o["new"](e)},backgroundTask:function(e){return n["new"](e)}}},{"./lib/engine/background-task-broker":2,"./lib/engine/discrete-task-broker":3,"./lib/engine/pooled-task-broker":4,"./lib/task/background-task":8,"./lib/task/discreate-task":9,"./lib/task/pooled-task":10,deployr:21}],2:[function(e,t,r){var i=e("merge"),o=e("./rbroker-engine"),n=e("../worker/background-task-worker");t.exports=o.extend({initialize:function(e){var t=10;o.initialize.call(this,i(e,{maxConcurrentTaskLimit:t}));for(var r=0;r<this.parallelTaskLimit;r++)this.resourceTokenPool.offer(r);this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")})},refresh:function(e){throw new Error("BackgroundTaskBroker refresh not supported.")},shutdown:function(){return this.flush(),this.ruser.release()},createWorker:function(e){return n["new"](e,this.ruser)}})},{"../worker/background-task-worker":13,"./rbroker-engine":5,merge:41}],3:[function(e,t,r){var i=e("d.js"),o=e("./rbroker-engine"),n=e("../worker/discrete-task-worker");t.exports=o.extend({initialize:function(e){o.initialize.call(this,e);for(var t=0;t<this.parallelTaskLimit;t++)this.resourceTokenPool.offer(t);e.credentials?this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")}):this.validateEndpoint(function(){this.ruser=null,this.emit("ready")})},refresh:function(e){throw new Error("DiscreteTaskBroker refresh not supported.")},createWorker:function(e){return n["new"](e,this.ruser)},shutdown:function(){return this.flush(),this.ruser?this.ruser.release():i.promisify(!0)}})},{"../worker/discrete-task-worker":14,"./rbroker-engine":5,"d.js":19}],4:[function(e,t,r){var i=e("deployr"),o=e("d.js"),n=e("merge"),s=e("./rbroker-engine"),a=e("../worker/pooled-task-worker");t.exports=s.extend({initialize:function(e){function t(e){var t=e.get("projects");if(t.length>0){var i=e.get("error");i&&r.emit("warning",i),t.forEach(function(e){r.resourceTokenPool.offer(e.project)}),r.parallelTaskLimit=r.resourceTokenPool.size(),r.httpKeepAlive.start(r.ruser),r.emit("ready")}else r.emit("error",e.get("error"))}if(s.initialize.call(this,e),!e.credentials)throw new Error("Broker failed to initialize, user credentials required.");var r=this,o=this.parallelTaskLimit,a=n({poolsize:o},e.pool||{});this.httpKeepAlive={id:null,PING_INTERVAL:6e4,start:function(e){this.stop(),this.id=setInterval(function(){i.io("/r/user/about").share(e.getCookies()).end()},this.PING_INTERVAL)},stop:function(){clearInterval(this.id)}},this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(){e.releaseGridResources?this.ruser.io("/r/user/release").end().io("/r/project/pool").data(a).end(t):this.ruser.io("/r/project/pool").data(a).end(t)})},refresh:function(e){var t=[],r={},s=this.ruser;return this.isIdle()?(e=e||{},r={code:"# Refresh project on PooledTaskBroker.",preloadfilename:e.preloadfilename,preloaddirectory:e.preloaddirectory,preloadfileauthor:e.preloadfileauthor,preloadfileversion:e.preloadfileversion},this.resourceTokenPool.q.forEach(function(e){t.push(i.io("/r/project/recycle").share(s.getCookies()).delay().data({project:e}).end().io("/r/project/execute/code").share(s.getCookies()).delay().data(n(r,{project:e})).end())}),i.pipeline(t)):o.rejected(new Error("RBroker is not idle, refresh not permitted."))},shutdown:function(){var e=this.resourceTokenPool.q.slice();return this.resourceTokenPool.q=[],this.httpKeepAlive.stop(),this.flush(),this.ruser.release(e)},createWorker:function(e){return a["new"](e,this.ruser)}})},{"../worker/pooled-task-worker":15,"./rbroker-engine":5,"d.js":19,deployr:21,merge:41}],5:[function(e,t,r){var i=e("deployr"),o=e("merge"),n=e("selfish").Base,s=e("deployr/lib/emitter"),a=e("../rtask-token"),u=e("../util/rtask-queue"),c=999;t.exports=n.extend(s,{initialize:function(e){s.initialize.call(this);var t=this;this.config=e,this.scope=this.config.ctx||this,this.engineStarted=!1,this.parallelTaskLimit=this.config.maxConcurrentTaskLimit||1,this.pendingLow=u["new"](c),this.pendingHigh=u["new"](c),this.resourceTokenPool=u["new"](c),i.configure({host:e.host,cors:e.cors,logging:e.logging,allowSelfSignedSSLCert:e.allowSelfSignedSSLCert,events:{error:function(e,t){this.emit("error",t)}.bind(this)}}),this.runtime={runningTasks:0,totals:{success:0,failure:0},stats:function(e){return{maxConcurrency:t.maxConcurrency(),totalTasksRun:this.totals.success+this.totals.failure,totalTasksRunToSuccess:this.totals.success,totalTasksRunToFailure:this.totals.failure,totalTimeTasksOnCode:e.result.timeOnCode,totalTimeTasksOnServer:e.result.timeOnServer,totalTimeTasksOnCall:e.result.timeOnCall,task:e.task}},calibrate:function(e){return this.runningTasks=this.runningTasks+e,this.runningTasks<0&&(this.runningTasks=0),this.runningTasks}},this.on("ready",function(){this.engineStarted=!0;for(var e=0;e<this.parallelTaskLimit&&!this.isIdle();e++)this.run()})},validateEndpoint:function(e){return i.io("/r/server/info").ctx(this).timeout(1e4).end(e)},owner:function(){return this.ruser},simulateApp:function(e){if(e){if("function"!=typeof e.simulateApp)throw new Error('ReferenceError: "simulateApp" is not defined');e.simulateApp(this)}},submit:function(e,t){var r=this.createWorker(e),i=a["new"](r);return t?this.pendingHigh.offer(r):this.pendingLow.offer(r),this.run(),i},maxConcurrency:function(){return this.parallelTaskLimit},flush:function(){return this.pendingHigh.clear(),this.pendingLow.clear(),this.status()},isConnected:function(){var e=this.ruser?this.ruser.io("/r/user/about"):i.io("/r/server/info");return e.global(!1).promise().success(function(){return!0}).error(function(){return!1})},status:function(){var e=this.pendingHigh.size()+this.pendingLow.size(),t=this.parallelTaskLimit-this.runtime.runningTasks,r=this.isIdle();return{pending:e,executing:t,idle:r,toString:function(){return'\nRBrokerStatus: [ pending = "'+e+'" ] [ executing = "'+t+'" ] [ idle = "'+r+'" ]\n'}}},isIdle:function(){return 0===this.runtime.runningTasks&&this.pendingLow.isEmpty()&&this.pendingHigh.isEmpty()},ready:function(e){return this.on("ready",e),this},error:function(e){return this.on("error",e),this},warning:function(e){return this.on("warning",e),this},complete:function(e){return this.on("complete",e),this},idle:function(e){return this.on("idle",e),this},progress:function(e){return this.on("progress",e),this},start:function(e){return this.on("start",e),this},run:function(){var e,t=this;!this.engineStarted||this.resourceTokenPool.isEmpty()||this.pendingLow.isEmpty()&&this.pendingHigh.isEmpty()||(e=this.pendingHigh.take()||this.pendingLow.take(),this.runtime.calibrate(1),this.emit("start",e.task),e.work(this.resourceTokenPool.take()).then(function(e){t.runtime.totals.success++,t.emit("progress",t.runtime.stats(e)),t.emit("complete",e.task,e.result),this.resolve(e)}.bind(e),function(e){var r={task:this.task,result:{id:null,type:this.task.type,success:!1,timeOnCode:0,timeOnServer:0,timeOnCall:0,failure:e}};t.runtime.totals.failure++,t.emit("progress",t.runtime.stats(r)),t.emit("error",o(e,{task:this.task})),t.emit("complete",r.task,r.result),this.reject(o(e,{task:this.task}))}.bind(e)).ensure(function(e){t.runtime.calibrate(-1),t.resourceTokenPool.offer(this.resourceToken),t.run(),t.isIdle()&&t.emit("idle")}.bind(e)))}})},{"../rtask-token":6,"../util/rtask-queue":12,deployr:21,"deployr/lib/emitter":23,merge:41,selfish:42}],6:[function(e,t,r){var i=e("selfish").Base;t.exports=i.extend({initialize:function(e){this.worker=e,this.cancelled=!1},cancel:function(e){return this.cancelled=this.worker.terminate(e),this.cancelled},getTask:function(){return this.worker.task},isDone:function(){return!this.isPending()},isPending:function(){return this.worker.isPending()},isCancelled:function(){return this.cancelled},promise:function(){return this.worker.defer.promise}})},{selfish:42}],7:[function(e,t,r){var i=e("selfish").Base,o=e("enum"),n=new o(["DISCRETE","POOLED","BACKGROUND"],"RTaskType");t.exports=i.extend({DISCRETE:n.DISCRETE,POOLED:n.POOLED,BACKGROUND:n.BACKGROUND})},{"enum":39,selfish:42}],8:[function(e,t,r){var i=e("selfish").Base,o=e("../rtask-type"),n=e("./rtask");t.exports=i.extend(n,{initialize:function(e){n.initialize.call(this,e,o.BACKGROUND)},toString:function(){return"BackgroundTask: "+n.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],9:[function(e,t,r){var i=e("selfish").Base,o=e("../rtask-type"),n=e("./rtask");t.exports=i.extend(n,{initialize:function(e){n.initialize.call(this,e,o.DISCRETE)},toString:function(){return"DiscreteTask: "+n.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],10:[function(e,t,r){var i=e("selfish").Base,o=e("../rtask-type"),n=e("./rtask");t.exports=i.extend(n,{initialize:function(e){n.initialize.call(this,e,o.POOLED)},toString:function(){return"PooledTask: "+n.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],11:[function(e,t,r){var i=e("selfish").Base;t.exports=i.extend({initialize:function(e,t){var r=this;e=e||{},this.type=t,this.propKeys=Object.keys(e),this.token=null;for(var i in e)!function(t){Object.defineProperty(r,t,{get:function(){return e[t]},set:function(r){e[t]=r}})}(i)},serialize:function(){for(var e={},t=this.propKeys,r=t.length;r;--r)e[t[r-1]]=this[t[r-1]];return e},toString:function(){var e="",t=this.propKeys;for(var r in t)e+=" [ "+t[r]+' = "'+this[t[r]]+'" ]';return this.token&&(e+=' [ token = "'+this.token+'" ]'),e}})},{selfish:42}],12:[function(e,t,r){var i=e("selfish").Base,o=i.extend({initialize:function(e){this.capacity=e,this.q=[]},offer:function(e){var t=this.size()<this.capacity;return t&&this.q.push(e),t},take:function(){return this.q.shift()},peek:function(){return this.q[0]},size:function(){return this.q.length},isEmpty:function(){return 0===this.size()},clear:function(){this.q.length=0},iter:function(e){this.q.forEach(e)}});t.exports=o},{selfish:42}],13:[function(e,t,r){var i=(e("selfish").Base,e("deployr")),o=(e("d.js"),e("../rtask-type")),n=e("./rbroker-worker");t.exports=n.extend({initialize:function(e,t){n.initialize.call(this,e),this.ruser=t,this.job=null},work:function(e){var t=this,r=(new Date).getTime(),n=this.task.serialize(),s=n.rinputs||[],a=n.routputs||[];return delete n.rinputs,delete n.routputs,this.resourceToken=e,i.io("/r/job/submit").share(this.ruser.getCookies()).data(n).global(!1).rinputs(s).routputs(a).promise().then(function(e){var i=e.get("job");return t.job=i.job,{task:t.task,result:{id:i.job,type:o.BACKGROUND,timeOnCode:0,timeOnServer:0,timeOnCall:(new Date).getTime()-r,success:!0,failure:null}}})},terminate:function(e){return e&&this.job?(this.ruser.io("/r/job/cancel").data({job:this.job}).end(),!0):!1}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,selfish:42}],14:[function(e,t,r){var i=(e("selfish").Base,e("deployr")),o=(e("d.js"),e("../rtask-type")),n=e("./rbroker-worker");t.exports=n.extend({initialize:function(e,t){n.initialize.call(this,e),this.ruser=t,this.io=null},work:function(e){var t=this.task,r=(new Date).getTime(),n=this.task.serialize(),s=n.rinputs||[],a=n.routputs||[];return delete n.rinputs,delete n.routputs,this.resourceToken=e,this.io=i.io("/r/repository/script/execute").share(this.ruser?this.ruser.getCookies():null).data(n).rinputs(s).routputs(a).global(!1),this.io.promise().then(function(e){e=e.deployr.response;var i=e.execution.timeTotal,n=e.project.project,s=e.execution.console,a=e.execution.results,u=e.execution.artifacts,c=e.workspace.objects,l=e.repository.files;return{task:t,result:{id:n,type:o.DISCRETE,success:!0,timeOnCode:e.execution.timeCode,timeOnServer:i,timeOnCall:(new Date).getTime()-r,failure:null,interrupted:!1,generatedConsole:s,generatedPlots:a,generatedFiles:u,generatedObjects:c,storedFiles:l}}})},terminate:function(e){return e&&this.io&&this.isPending()?(this.io.abort(),this.io.destroy(),this.io=null,!0):!1}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,selfish:42}],15:[function(e,t,r){var i=(e("selfish").Base,e("d.js"),e("merge")),o=e("deployr"),n=e("../rtask-type"),s=e("./rbroker-worker");t.exports=s.extend({initialize:function(e,t){s.initialize.call(this,e),this.ruser=t},work:function(e){var t=this.task,r=i({project:e,phantom:!0},this.task.serialize()),s="/r/project/execute/"+(r.code?"code":"script"),a=r.rinputs||[],u=r.routputs||[],c=(new Date).getTime();return delete r.rinputs,delete r.routputs,this.resourceToken=e,o.io(s).share(this.ruser.getCookies()).data(r).rinputs(a).routputs(u).global(!1).promise().then(function(e){e=e.deployr.response;var r=e.execution.console,i=e.execution.results,o=e.execution.artifacts,s=e.workspace.objects,a=e.repository.files;return{task:t,result:{id:e.project.project,type:n.POOLED,success:!0,timeOnCode:e.execution.timeCode,timeOnServer:e.execution.timeTotal,timeOnCall:(new Date).getTime()-c,failure:null,interrupted:!1,generatedConsole:r,generatedPlots:i,generatedFiles:o,generatedObjects:s,storedFiles:a}}})},terminate:function(e){return e&&this.resourceToken&&this.isPending()?(this.ruser.io("/r/project/execute/interrupt").data({project:this.resourceToken}).end(),!0):!1}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,merge:41,selfish:42}],16:[function(e,t,r){var i=e("selfish").Base,o=e("d.js");t.exports=i.extend({initialize:function(e){this.task=e,this.defer=o()},work:function(e){},terminate:function(e){},isPending:function(){return this.defer.promise.isPending()},resolve:function(e){this.defer.resolve(e)},reject:function(e){this.defer.reject(e)}})},{"d.js":19,selfish:42}],17:[function(e,t,r){},{}],18:[function(e,t,r){function i(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var r=-1;++r<t;)e[r]();t=s.length}a=!1}}function o(){}var n=t.exports={},s=[],a=!1;n.nextTick=function(e){s.push(e),a||setTimeout(i,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=o,n.addListener=o,n.once=o,n.off=o,n.removeListener=o,n.removeAllListeners=o,n.emit=o,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],19:[function(e,t,r){(function(e){!function(r){"use strict";function i(e){h(function(){throw e})}function o(e){return this.then(e,r)}function n(e){return this.then(r,e)}function s(e,t){return this.then(function(t){return p(e)?e.apply(null,f(t)?t:[t]):T.onlyFuncs?t:e},t||r)}function a(e){function t(){e()}return this.then(t,t),this}function u(e){return this.then(function(t){return p(e)?e.apply(null,f(t)?t.splice(0,0,void 0)&&t:[void 0,t]):T.onlyFuncs?t:e},function(t){return e(t)})}function c(e){return this.then(r,e?function(t){throw e(t),t}:i)}function l(e,t){var r=m(e);if(1===r.length&&f(r[0])){if(!r[0].length)return T.fulfilled([]);r=r[0]}var i=[],o=T(),n=r.length;if(n)for(var s=(function(e){r[e]=T.promisify(r[e]),r[e].then(function(s){e in i||(i[e]=t?r[e]:s,--n||o.resolve(i))},function(s){e in i||(t?(i[e]=r[e],--n||o.resolve(i)):o.reject(s))})}),a=0,u=n;u>a;a++)s(a);else o.resolve(i);return o.promise}var h,p=function(e){return"function"==typeof e},f=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},d=function(e){return!(!e||!(typeof e).match(/function|object/))},y=function(e){return e===!1||e===r||null===e},m=function(e,t){return[].slice.call(e,t)},v="undefined",g=typeof TypeError===v?Error:TypeError;if(typeof e!==v&&e.nextTick)h=e.nextTick;else if(typeof MessageChannel!==v){var R=new MessageChannel,j=[];R.port1.onmessage=function(){j.length&&j.shift()()},h=function(e){j.push(e),R.port2.postMessage(0)}}else h=function(e){setTimeout(e,0)};var T=function(e){function t(){if(0!==v){var e,t=R,r=0,i=t.length,o=~v?0:1;for(R=[];i>r;r++)(e=t[r][o])&&e(f)}}function i(e){function r(e){return function(t){return o?void 0:(o=!0,e(t))}}var o=!1;if(v)return this;try{var n=d(e)&&e.then;if(p(n)){if(e===j)throw new g("Promise can't resolve itself");return n.call(e,r(i),r(l)),this}}catch(s){return r(l)(s),this}return m(function(){f=e,v=1,t()}),this}function l(e){return v||m(function(){try{throw e}catch(r){f=r}v=-1,t()}),this}var f,m=(r!==e?e:T.alwaysAsync)?h:function(e){e()},v=0,R=[],j={then:function(e,r){var i=T();return R.push([function(t){try{i.resolve(y(e)?t:p(e)?e(t):T.onlyFuncs?t:e)}catch(r){i.reject(r)}},function(e){if((y(r)||!p(r)&&T.onlyFuncs)&&i.reject(e),r)try{i.resolve(p(r)?r(e):r)}catch(t){i.reject(t)}}]),0!==v&&m(t),i.promise},success:o,error:n,otherwise:n,apply:s,spread:s,ensure:a,nodify:u,rethrow:c,isPending:function(){return!(0!==v)},getStatus:function(){return v}};return j.toSource=j.toString=j.valueOf=function(){return f===r?this:f},{promise:j,resolve:i,fulfill:i,reject:l}};T.deferred=T.defer=T,T.nextTick=h,T.alwaysAsync=!0,T.onlyFuncs=!0,T.resolved=T.fulfilled=function(e){return T(!0).resolve(e).promise},T.rejected=function(e){return T(!0).reject(e).promise},T.wait=function(e){var t=T();return setTimeout(t.resolve,e||0),t.promise},T.delay=function(e,t){var r=T();return setTimeout(function(){try{r.resolve(e.apply(null))}catch(t){r.reject(t)}},t||0),r.promise},T.promisify=function(e){return e&&p(e.then)?e:T.resolved(e)},T.all=function(){return l(arguments,!1)},T.resolveAll=function(){return l(arguments,!0)},T.nodeCapsule=function(e,t){return t||(t=e,e=void 0),function(){var r=T(),i=m(arguments);i.push(function(e,t){e?r.reject(e):r.resolve(arguments.length>2?m(arguments,1):t)});try{t.apply(e,i)}catch(o){r.reject(o)}return r.promise}},typeof window!==v&&(window.D=T),typeof t!==v&&t.exports&&(t.exports=T)}()}).call(this,e("_process"))},{_process:18}],20:[function(e,t,r){t.exports={"/r/user/login":{method:"POST",format:"json"},"/r/user/logout":{method:"POST",format:"json"},"/r/user/about":{method:"POST",format:"json"},"/r/user/autosave":{method:"POST",format:"json"},"/r/user/release":{method:"POST",format:"json"},"/r/project/create":{method:"POST",format:"json"},"/r/project/pool":{method:"POST",format:"json"},"/r/project/recycle":{method:"POST",format:"json"},"/r/project/list":{method:"POST",format:"json"},"/r/project/ping":{method:"POST",format:"json"},"/r/project/about":{method:"POST",format:"json"},"/r/project/about/update":{method:"POST",format:"json"},"/r/project/save":{method:"POST",format:"json"},"/r/project/saveas":{method:"POST",format:"json"},"/r/project/close":{method:"POST",format:"json"},"/r/project/grant":{method:"POST",format:"json"},"/r/project/import":{method:"POST",format:"json",upload:!0},"/r/project/export":{method:"POST",format:"json"},"/r/project/delete":{method:"POST",format:"json"},"/r/project/execute/code":{method:"POST",format:"json"},"/r/project/execute/script":{method:"POST",format:"json"},"/r/project/execute/interrupt":{method:"POST",format:"json"},"/r/project/execute/console":{method:"POST",format:"json"},"/r/project/execute/history":{method:"POST",format:"json"},"/r/project/execute/flush":{method:"POST",format:"json"},"/r/project/execute/result/list":{method:"POST",format:"json"},"/r/project/execute/result/download":{method:"POST",format:"json"},"/r/project/execute/result/delete":{method:"POST",format:"json"},"/r/project/workspace/list":{method:"POST",format:"json"},"/r/project/workspace/get":{method:"POST",format:"json"},"/r/project/workspace/upload":{method:"POST",format:"json",upload:!0},"/r/project/workspace/transfer":{method:"POST",format:"json"},"/r/project/workspace/push":{method:"POST",format:"json"},"/r/project/workspace/save":{method:"POST",format:"json"},"/r/project/workspace/store":{method:"POST",format:"json"},"/r/project/workspace/load":{method:"POST",format:"json"},"/r/project/workspace/delete":{method:"POST",format:"json"},"/r/project/directory/list":{method:"POST",format:"json"},"/r/project/directory/upload":{method:"POST",format:"json",upload:!0},"/r/project/directory/transfer":{method:"POST",format:"json"},"/r/project/directory/write":{method:"POST",format:"json"},"/r/project/directory/update":{method:"POST",format:"json"},"/r/project/directory/store":{method:"POST",format:"json"},"/r/project/directory/load":{method:"POST",format:"json"},"/r/project/directory/download":{method:"POST",format:"json"},"/r/project/directory/delete":{method:"POST",format:"json"},"/r/project/package/list":{method:"POST",format:"json"},"/r/project/package/attach":{method:"POST",format:"json"},"/r/project/package/detach":{method:"POST",format:"json"},"/r/job/list":{method:"POST",format:"json"},"/r/job/submit":{method:"POST",format:"json"},"/r/job/schedule":{method:"POST",format:"json"},"/r/job/query":{method:"POST",format:"json"},"/r/job/cancel":{method:"POST",format:"json"},"/r/job/delete":{method:"POST",format:"json"},"/r/repository/directory/list":{method:"POST",format:"json"},"/r/repository/directory/create":{method:"POST",format:"json"},"/r/repository/directory/rename":{method:"POST",format:"json"},"/r/repository/directory/copy":{method:"POST",format:"json"},"/r/repository/directory/move":{method:"POST",format:"json"},"/r/repository/directory/update":{method:"POST",format:"json"},"/r/repository/script/list":{method:"POST",format:"json"},"/r/repository/script/execute":{method:"POST",format:"json"},"/r/repository/script/render":{method:"POST",format:"json"},"/r/repository/script/interrupt":{method:"POST",format:"json"},"/r/repository/shell/execute":{method:"POST",format:"json"},"/r/repository/directory/archive":{method:"POST",format:"json"},"/r/repository/directory/upload":{method:"POST",format:"json",upload:!0},"/r/repository/directory/download":{method:"POST",format:"json"},"/r/repository/directory/delete":{method:"POST",format:"json"},"/r/repository/file/list":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/upload":{method:"POST",format:"json",upload:!0},"/r/repository/file/transfer":{method:"POST",format:"json"},"/r/repository/file/write":{method:"POST",format:"json"},"/r/repository/file/update":{method:"POST",format:"json"},"/r/repository/file/diff":{method:"POST",format:"json"},"/r/repository/file/revert":{method:"POST",format:"json"},"/r/repository/file/grant":{method:"POST",format:"json"},"/r/repository/file/download":{method:"POST",format:"json"},"/r/repository/file/delete":{method:"POST",format:"json"},"/r/repository/file/copy":{method:"POST",format:"json"},"/r/repository/file/move":{method:"POST",format:"json"},"/r/server/info":{method:"GET",format:"json"}}},{}],21:[function(e,t,r){(function(r){function i(e,t){var r=t.deployr?t.deployr.response.errorCode:t.status,i=this;j.events&&(t.deployr||(t=t.text),i=j.events.ctx||i,j.events.error&&j.events.error.apply(i,[e,t]),j.events[r]&&j.events[r].apply(i,[e,t]))}var o="undefined"!=typeof window,n=e("superagent"),s=e("d.js"),a=e("fs"),u=e("./apis.json"),c=e("./lib/es"),l=e("./lib/utils"),h=e("./lib/lang"),p=e("./lib/logger"),f=e("./lib/queue"),d=e("./lib/emitter"),y=e("./lib/encoder"),m=e("./lib/selfish").Base,v=e("./lib/rinput"),g=e("./lib/rinputs"),R=l.merge;p.setLevel(p.OFF);var j={cors:!1,logging:!1,sticky:!1,cookies:null,host:"",allowSelfSignedSSLCert:!1,maxRequests:null,events:{},set:function(e,t){"set"!==e&&("host"===e&&t&&(t=t.replace(/\/*$|\/*deployr\/*$/,""),t=new RegExp("^(http|https)://","i").test(t)?t:"http://"+t),this[e]=t)}},T=["user","project","workspace","execution","directory","repository","packages"],k=m.extend(d,g,{initialize:function(e,t){d.initialize.call(this,{});var i=j;if(!u[e])throw new Error('Invalid API "'+e+'"');this.api=R({call:e},u[e]),this.link=t||{},this.q=this.link.queue||new f,this.deferred=this.link.deferred||s(),this.cookies=this.link.cookies,this.logger=p.get(e,p.OFF),this.params={},this.inputs=[],this.outputs=[],this.rstream=!1,this.delayed=!1,this.globalEvts=!0,this.file=null,this.filter=null,this.data({format:this.api.format}),this.req=n[this.api.method.toLowerCase()](i.host+"/deployr"+e),this.req.timeout(12e5),o&&j.cors&&this.req.withCredentials(),!o&&j.allowSelfSignedSSLCert&&(r.env.NODE_TLS_REJECT_UNAUTHORIZED="0")},ctx:function(e){return this.scope=e||this,this},global:function(e){return this.globalEvts=h.isBoolean(e)?e:this.globalEvts,this},about:function(){var e=this.req.res;return"/r/user/login"===this.api.call&&e?e.body.get("user"):null},share:function(e){return j.sticky?j.cookies?this.cookies=j.cookies.slice(0):e&&(this.cookies=e.slice(0),j.set("cookies",this.cookies)):this.cookies=e?e.slice(0):this.cookies,this},getCookies:function(){return this.cookies},delay:function(e){return this.delayed=!isNaN(parseFloat(e))&&isFinite(e)?e:!0,this},drain:function(){return this.delayed=!1,this.q.flush(),this.deferred.promise},promise:function(){return this.end(),this.deferred.promise},abort:function(){return this.req.abort(),this.emit("abort"),this.deferred.reject(this._handleError({status:"abort",text:"DeployR request aborted."})),this},timeout:function(e){return this.req.timeout(e),this},log:function(e){return this.logger.setLevel(e||p.DEBUG),this},entity:function(e){return this.filter=l.inArray(T,e),this},data:function(e){e=e||{},(e.rinput||e.rinputs)&&(this.rinput(e.rinput),this.rinputs(e.rinputs));var t=["rinput","rinputs","__cookies__"];return t.forEach(function(t){delete e[t]}),this.params=R(this.params,e),this},attach:function(e,t){return this.api.upload&&(this.file=e,t&&this.data({filename:t})),this},stream:function(){return this.rstream=!o&&this.api.upload,this},ensure:function(e){return this.deferred.promise.ensure(e),this.deferred.promise},error:function(e){return this.on("error",e),this},pipe:function(e){var t=this.q,r=this.api;return t.add(function(i,o,n){if(o)return this.deferred.reject(o),t.flush(i,o,n),void this._clear();this._prepRequest(i,n),p.info("pipe()",r,this.req),this.logger.info("pipe()",r,this.req);var s=this.req.pipe(e);t["yield"](!0),s.on("error",function(){}),s.on("end",function(){}),s.on("data",function(){})},this),t.size()<=1&&t.flush(),e},end:function(e){var t=this,r=this.q,i=this.api,o=null,n=this.filter;return r.add(function(s,a,u){return a?(this.deferred.reject(a),r.flush(s,a,u),void this._clear()):(this._prepRequest(s,u),p.info("io()",i,this.req),this.logger.info("io()",i,this.req),this.req.end(function(u){t.share(t.cookies||u.headers["set-cookie"]),t.cookies&&(p.info("cookies",i,t.cookies),t.logger.info("cookies",i,t.cookies)),a=t._handleError(u);var c=u.body&&u.body.deployr?u.body:u;t.inputs=[],t.outputs=[],a||(p.info("end()",i,c,u),t.logger.info("end()",i,c,u),n&&(c=c.deployr.response[n]||c),c.get=function(e){return l.get(c.deployr.response,e)},c.workspace=function(e){return l.workspace(c.deployr.response,e)},e&&(o=e.apply(t.scope,[c,s])),0===r.size()&&(t._clear(),t.deferred.resolve(s||c)),o=R(o,{__cookies__:t.cookies})),r["yield"](!1),r.flush(c,a,o)}),void r["yield"](!0))},this,this.delayed),!this.delayed&&r.size()<=1&&r.flush(),this},io:function(e){return k["new"](e,{cookies:this.cookies,queue:this.q,deferred:this.deferred})},script:function(){var e=l.signature(arguments),t=e.opts,r=e.api,i={cookies:this.cookies,queue:this.q,deferred:this.deferred};return e.create?k["new"]("/r/project/create",i).end(function(e){return{project:e.get("project").project}}).io(r).data(t):k["new"](r,i).data(t)},shell:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},i=h.isString(e)?e.split("/"):[];return i.length>3&&(i=i.slice(1)),k["new"]("/r/repository/shell/execute",r).data({author:i[0],directory:i[1],filename:i[2],args:t})},code:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},i="/r/project/execute/code";return t?k["new"](i,r).data({code:e,project:t}):k["new"]("/r/project/create",r).end(function(e){return{project:e.get("project").project}}).io(i).data({code:e})},release:function(e,t){function r(e){e===u&&(t?(o.resolve(!0),i.destroy()):k["new"]("/r/user/logout").share(c).error(function(){o.reject(!1)}).end(function(){o.resolve(!0)}).ensure(function(){i.destroy()}))}e=h.isArray(e)?e:[e];var i=this,o=s(),n=!e||!e[0],a=0,u=n?a:e.length-1,c=this.getCookies();return n?r(a):e.forEach(function(e){k["new"]("/r/project/close").data({project:e}).share(c).end().ensure(function(){r(a),a++})}),o.promise},routputs:function(e){return e&&(this.outputs=this.outputs.concat(e)),this},routput:function(e){return e&&this.routputs([e]),this},rinputs:function(e){return e&&(this.inputs=this.inputs.concat(e)),this},rinput:function(e){return e&&this.inputs.push(e),this},destroy:function(){try{this.emit("destroy"),this.offAll();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null,delete this[e])}catch(t){}},_clear:function(){this.params={},this.inputs=[],this.outputs=[],this.rstream=!1,this.delayed=!1,this.api=null,this.file=null,this.filter=null},_prepRequest:function(e,t){var r=this.req,i=this.file;if(this.api.upload?o||this.req.type("multipart/form-data"):r.type("form"),r.on("error",function(e){e=e||{code:"UNKNOWN CODE",text:"UNKNOWN ERROR"},this._handleError({status:e.code||"UNKNOWN CODE",text:e})}.bind(this)),this.share(t?t.__cookies__:null),t&&this.data(t),this.inputs.length>0&&this.data({inputs:y.encode(this.inputs)}),this.outputs.length>0&&this.data({robjects:this.outputs.join()}),this.cookies&&this.cookies.forEach(function(e){r.set("Cookie",e)}),this.api.upload){for(var n in this.params)r.field(n,this.params[n]?this.params[n]+"":"");r.attach("file",this.rstream?a.createReadStream(i):i)}else r["GET"===this.api.method?"query":"send"](this.params)},_handleError:function(e){var t=e.status,r=e.body&&e.body.deployr?e.body:e,o=200!==t||r.deployr&&!r.deployr.response.success;return o&&(r={get:function(e){return l.get(this.deployr.response,e)},deployr:{response:{success:!1,call:this.api.call,errorCode:r.deployr?r.deployr.response.errorCode:t,error:r.deployr?r.deployr.response.error:r.text}}},p.error("error()",this.api,r,e),this.logger.error("error()",this.api,r,e),this.globalEvts&&i(this.api.call,r),this.emit("error",r),this.emit("deployr-io:"+r.deployr.response.errorCode,r),this.deferred.reject(r)),o}});o&&(window.Revolution=window.Revolution||e("./lib/deprecated")),t.exports={DeployR:k,apis:function(e){return e?Object.keys(u):u},configure:function(e){e=e||{};for(var t in e)j.set(t,e[t]);return j.sticky||j.set("cookies",null),p.setLevel(j.logging?p.DEBUG:p.OFF),this},io:function(e){return k["new"](e)},auth:function(e,t){var r={username:e,password:t};return k["new"]("/r/user/login").data(r).end()},script:function(){var e=l.signature(arguments),t=e.opts,r=e.api;return e.create?k["new"]("/r/project/create").end(function(e){return{project:e.get("project").project}}).io(r).data(t):k["new"](r).data(t)},pipeline:function(e){function t(){o.add(function(){e.shift().drain().then(function(e){
n.push(e),a.push(u),o.isEmpty()&&(r.configure(c),i.resolve({results:n,errors:a})),o.take()},function(e){n.push(u),a.push(e),o.isEmpty()&&0===n.length&&(r.configure(c),i.reject(a)),o.take()})},null,!0)}var r=this,i=s(),o=new f,n=[],a=[],u=null,c={sticky:j.sticky,cookies:j.cookies};e=e.slice(0),r.configure({sticky:!0});for(var l=0;l<e.length;l++)t();return o.take(),i.promise},es:function(e){var t=c["new"](j.host,e);if(e&&e.username&&e.password){var r=this.auth(e.username,e.password);r.ensure(function(){t.share(r.getCookies()),t.flush()})}return t},RInput:{numeric:function(e,t){return v["new"](e,t).numeric()},integer:function(e,t){return v["new"](e,t).integer()},logical:function(e,t){return v["new"](e,t).logical()},character:function(e,t){return v["new"](e,t).character()},date:function(e,t){return v["new"](e,t).date()},posixct:function(e,t){return v["new"](e,t).posixct()},numericVector:function(e,t){return v["new"](e,t).numericVector()},integerVector:function(e,t){return v["new"](e,t).integerVector()},logicalVector:function(e,t){return v["new"](e,t).logicalVector()},characterVector:function(e,t){return v["new"](e,t).characterVector()},dateVector:function(e,t){return v["new"](e,t).dateVector()},posixctVector:function(e,t){return v["new"](e,t).posixctVector()},list:function(e,t){return v["new"](e,t).list()},dataframe:function(e,t){return v["new"](e,t).dataframe()},factor:function(e,t,r,i){var o={levels:r,labels:i};return v["new"](e,t,o).factor()},ordered:function(e,t,r,i){var o={levels:r,labels:i};return v["new"](e,t,o).ordered()},numericMatrix:function(e,t){return v["new"](e,t).numericMatrix()},integerMatrix:function(e,t){return v["new"](e,t).integerMatrix()},logicalMatrix:function(e,t){return v["new"](e,t).logicalMatrix()},characterMatrix:function(e,t){return v["new"](e,t).characterMatrix()}}}}).call(this,e("_process"))},{"./apis.json":20,"./lib/deprecated":22,"./lib/emitter":23,"./lib/encoder":24,"./lib/es":25,"./lib/lang":26,"./lib/logger":27,"./lib/queue":29,"./lib/rinput":30,"./lib/rinputs":31,"./lib/selfish":33,"./lib/utils":34,_process:18,"d.js":19,fs:17,superagent:35}],22:[function(e,t,r){function i(e,t){var r=t||globalConfig.entity;if(r)for(var i=e.deployr.response,o=p,n=0;n<o.length;n++){var s=o[n];if(i[s]&&r[s]&&r[s].parser){var a=r[s].scope||this;i[s]=r[s].parser.call(a,i[s])}}return e}function o(e){return e=e.replace("/r/",""),e.toLowerCase().replace(/\/(.)/g,function(e,t){return t.toUpperCase()})}function n(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].normalize());return t}function s(e){}function a(e){}var u,c,l=(e("./lang"),e("./selfish").Base),h=e("./rinput"),p=["user","project","workspace","execution","directory","repository","packages"],f={ENDPOINT_WHITELIST:{login:"/r/user/login",logout:"/r/user/logout",projectCreate:"/r/project/create",projectClose:"/r/project/close",projectAboutUpdate:"/r/project/about/update",projectSave:"/r/project/save",projectSaveAs:"/r/project/saveas",clientProjectSave:"/r/client/project/save",clientProjectClose:"/r/client/project/close"},session:{},config:{},setUnloadConfig:function(e){e=e||{},this.config={disableautosave:e.disableautosave||!0,dropworkspace:e.dropworkspace||!0,dropdirectory:e.dropdirectory||!0,drophistory:e.drophistory||!0,flushhistory:e.flushhistory||!0}},setSession:function(e){this.session=e},setProject:function(e){this.session.project=e},clearSession:function(){this.session={}},clearProject:function(){this.session.project=null},unloadHandler:function(){try{var e=this.session.project;if(e){var t=this._config;t.project=e.id,t.projectcookie=e.cookie,deployr.io("/r/project/close").data(t).sync().end()}}catch(r){throw new Error(r)}}},d=l.extend({initialize:function(e,t,r){this.type=e,this.rclass=t,this.rinput=r},getType:function(){return this.type},getRClass:function(){return this.rclass},getName:function(){return this.rinput.name},getValue:function(){return this.rinput.value},getLevels:function(){return this.rinput.levels},getLabels:function(){return this.rinput.labels},getOrdered:function(){return this.rinput.ordered},normalize:function(){return this.rinput}});s.prototype={events:{},scope:null,on:function(e,t){return e in this.events==!1&&(this.events[e]=[]),this.events[e].push(t),a('Emitter.on("'+e+'")'),this},emit:function(e){if(e in this.events==!1)return this;for(var t=0;t<this.events[e].length;t++)a('Fired event: "'+e+'"'),this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1));return this},removeAllListeners:function(e){if(e){if(e in this.events==!1)return this;delete this.events[e]}else for(var t in this.events)delete this.events[t];return this},removeListenerAt:function(e,t){var r=this.events[e],i=r.slice(t+1);r.length=t,r.push.apply(r,i),this.events[e]=r},off:function(e,t){if(e in this.events==!1)return this;if(!t)return this.removeAllListeners(e);for(var r=0;r<this.events[e].length;r++)if(this.events[e][r]==t)return this.removeListenerAt(e,r),this;return this}},c=new s,u={version:e("../package").version,Event:{on:function(e,t,r){c.on(e,t,r)},detach:function(e,t,r){c.off(e,t)}},RDataFactory:{createNumeric:function(e,t){return d["new"]("primitive","numeric",h["new"](e,t).numeric())},createInteger:function(e,t){return d["new"]("primitive","integer",h["new"](e,t).integer())},createBoolean:function(e,t){return d["new"]("primitive","numeric",h["new"](e,t).logical())},createString:function(e,t){return d["new"]("primitive","character",h["new"](e,t).character())},createDate:function(e,t){return d["new"]("date","Date",h["new"](e,t).date())},createPOSIXDate:function(e,t){return d["new"]("date","POSIXct",h["new"](e,t).posixct())},createNumericVector:function(e,t){return d["new"]("vector","numeric",h["new"](e,t).numericVector())},createIntegerVector:function(e,t){return d["new"]("vector","integer",h["new"](e,t).integerVector())},createBooleanVector:function(e,t){return d["new"]("vector","logical",h["new"](e,t).logicalVector())},createStringVector:function(e,t){return d["new"]("vector","character",h["new"](e,t).characterVector())},createDateVector:function(e,t){return d["new"]("type","Date",h["new"](e,t).dateVector())},createPOSIXDateVector:function(e,t){return d["new"]("vector","POSIXct",h["new"](e,t).posixctVector())},createList:function(e,t){return d["new"]("list","list",h["new"](e,t).list())},createDataframe:function(e,t){return d["new"]("dataframe","data.frame",h["new"](e,t).dataframe())},createFactor:function(e,t,r,i,o){var n={levels:i,labels:o};return r?d["new"]("factor","factor",h["new"](e,t,n).ordered()):d["new"]("factor","factor",h["new"](e,t,n).factor())},createNumericMatrix:function(e,t){return d["new"]("matrix","matrix",h["new"](e,t).numericMatrix())},createIntegerMatrix:function(e,t){return d["new"]("matrix","matrix",h["new"](e,t).integerMatrix())},createBooleanMatrix:function(e,t){return d["new"]("matrix","matrix",h["new"](e,t).logicalMatrix())},createStringMatrix:function(e,t){return d["new"]("matrix","matrix",h["new"](e,t).characterMatrix())}},DeployR:{init:function(e){if(e=e||{},e.compatibility,e.events){var t=e.events;if(t.unload&&(f.setUnloadConfig(t.unload),u.Event.on("deployR:unload",f.unloadHandler,f)),t.globalIO){var r=t.globalIO.scope||window,i=t.globalIO.lifecycle,o=t.globalIO.statusCode;if(i)for(var n in i)u.Event.on("deployR-io:"+n,i[n],r);if(o)for(var n in o)u.Event.on("deployR-io:"+n,o[n],r)}}deployr.configure({host:e.deployrURI,cors:e.deployrURI?!0:!1,logging:e.logging,sticky:!0})},io:function(e,t,r){console&&console.warn('"'+o(e)+'()" API is now deprecated.'),r=r||{},t=t||{};var s=t.transaction||{},a=s.arguments,u=s.statusCode||{},l=r.scope||window,h=t.robjects,p=t.inputs;t.transaction&&delete t.transaction,t.method&&delete t.method,t.on&&delete t.on,t.format&&delete t.format,t.inputs&&delete t.inputs,t.robjects&&delete t.robjects;var f=deployr.io(e).data(t||{}).error(function(t){c.emit("deployR-io:failure",[t,e,a]),r.failure&&r.failure.apply(l,[t,e,a]),c.emit("deployR-io:"+code,[t,e,a])});if(p&&f.rinputs(n(p)),h&&f.routputs(h),s.sync&&f.sync(),s.timeout&&f.timeout(s.timeout),u)for(var d in u)f.on("deployr-io:"+d,function(t){var r=u,i=t.deployr.response.error,o=t.deployr.response.errorCode;r[o].apply(l,[t,o,i,e,a])});return c.emit("deployR-io:start"),r.start&&r.start.apply(l,[e,a]),f.end(function(t){c.emit("deployR-io:complete"),r.complete&&r.complete.apply(l,[t,e,a]),s.entity&&(t=i(t,s.entity)),c.emit("deployR-io:success",[t,e]),r.success&&r.success.apply(l,[t,e,a]),c.emit("deployR-io:end",[t,e]),r.end&&r.end.apply(l,[t,e,a])}),f},parseInputs:function(e){return e},projectWorkspaceList:function(e,t){return this.io("/r/project/workspace/list",e,t)},projectWorkspaceGet:function(e,t){return this.io("/r/project/workspace/get",e,t)},projectWorkspaceUpload:function(e,t){e.format="text";({data:e,method:"POST",form:{id:e.formId},on:t});return this.io("/r/project/workspace/upload",e,t)},projectWorkspaceTransfer:function(e,t){return this.io("/r/project/workspace/transfer",e,t)},projectWorkspacePush:function(e,t){return this.io("/r/project/workspace/push",e,t)},projectWorkspaceSave:function(e,t){return this.io("/r/project/workspace/save",e,t)},projectWorkspaceStore:function(e,t){return this.io("/r/project/workspace/store",e,t)},projectWorkspaceLoad:function(e,t){return this.io("/r/project/workspace/load",e,t)},projectWorkspaceDelete:function(e,t){return this.io("/r/project/workspace/delete",e,t)},projectCreate:function(e,t){return this.io("/r/project/create",e,t)},projectPool:function(e,t){return this.io("/r/project/pool",e,t)},projectRecycle:function(e,t){return this.io("/r/project/recycle",e,t)},projectList:function(e,t){return this.io("/r/project/list",e,t)},projectPing:function(e,t){return this.io("/r/project/ping",e,t)},projectAbout:function(e,t){return this.io("/r/project/about",e,t)},projectAboutUpdate:function(e,t){return this.io("/r/project/about/update",e,t)},projectSave:function(e,t){return this.io("/r/project/save",e,t)},projectSaveas:function(e,t){return this.io("/r/project/saveas",e,t)},projectClose:function(e,t){return this.io("/r/project/close",e,t)},projectGrant:function(e,t){return this.io("/r/project/grant",e,t)},projectImport:function(e,t){e.format="text";({data:e,method:"POST",form:{id:e.formId},on:t});return this.io("/r/project/import",e,t)},projectExport:function(e,t){return this.io("/r/project/export",e,t)},projectDelete:function(e,t){return this.io("/r/project/delete",e,t)},projectExecuteCode:function(e,t){return this.io("/r/project/execute/code",e,t)},projectExecuteScript:function(e,t){return this.io("/r/project/execute/script",e,t)},projectExecuteInterrupt:function(e,t){return this.io("/r/project/execute/interrupt",e,t)},projectExecuteConsole:function(e,t){return this.io("/r/project/execute/console",e,t)},projectExecuteHistory:function(e,t){return this.io("/r/project/execute/history",e,t)},projectExecuteFlush:function(e,t){return this.io("/r/project/execute/flush",e,t)},projectExecuteResultList:function(e,t){return this.io("/r/project/execute/result/list",e,t)},projectExecuteResultDownload:function(e,t){return this.io("/r/project/execute/result/download",e,t)},projectExecuteResultDelete:function(e,t){return this.io("/r/project/execute/result/delete",e,t)},projectDirectoryList:function(e,t){return this.io("/r/project/directory/list",e,t)},projectDirectoryUpload:function(e,t){e.format="text";({data:e,method:"POST",form:{id:e.formId},on:t});return this.io("/r/project/directory/upload",e,t)},projectDirectoryTransfer:function(e,t){return this.io("/r/project/directory/transfer",e,t)},projectDirectoryWrite:function(e,t){return this.io("/r/project/directory/write",e,t)},projectDirectoryUpdate:function(e,t){return this.io("/r/project/directory/update",e,t)},projectDirectoryStore:function(e,t){return this.io("/r/project/directory/store",e,t)},projectDirectoryLoad:function(e,t){return this.io("/r/project/directory/load",e,t)},projectDirectoryDownload:function(e,t){return this.io("/r/project/directory/download",e,t)},projectDirectoryDelete:function(e,t){return this.io("/r/project/directory/delete",e,t)},projectPackageList:function(e,t){return this.io("/r/project/package/list",e,t)},projectPackageAttach:function(e,t){return this.io("/r/project/package/attach",e,t)},projectPackageDetach:function(e,t){return this.io("/r/project/package/detach",e,t)},userLogin:function(e,t){return this.io("/r/user/login",e,t)},userLogout:function(e,t){return this.io("/r/user/logout",e,t)},userAbout:function(e){return this.io("/r/user/about",{},e)},userAutosave:function(e,t){return this.io("/r/user/autosave",e,t)},repositoryScriptList:function(e){return this.io("/r/repository/script/list",{},e)},repositoryScriptExecute:function(e,t){return this.io("/r/repository/script/execute",e,t)},repositoryScriptRender:function(e,t){return this.io("/r/repository/script/render",e,t)},repositoryScriptInterrupt:function(e){return this.io("/r/repository/script/interrupt",config,e)},repositoryFileList:function(e,t){return this.io("/r/repository/file/list",e,t)},repositoryFileUpload:function(e,t){e.format="text";({data:e,method:"POST",form:{id:e.formId},on:t});return this.io("/r/repository/file/upload",e,t)},repositoryFileTransfer:function(e,t){return this.io("/r/repository/file/transfer",e,t)},repositoryFileWrite:function(e,t){return this.io("/r/repository/file/write",e,t)},repositoryFileUpdate:function(e,t){return this.io("/r/repository/file/update",e,t)},repositoryFileRevert:function(e,t){return this.io("/r/repository/file/revert",e,t)},repositoryFileDiff:function(e,t){return this.io("/r/repository/file/diff",e,t)},repositoryFileGrant:function(e,t){return this.io("/r/repository/file/grant",e,t)},repositoryFileDownload:function(e,t){return this.io("/r/repository/file/download",e,t)},repositoryFileDelete:function(e,t){return this.io("/r/repository/file/delete",e,t)},repositoryFileFetch:function(e,t){return this.io("/r/repository/file/fetch",e,t)},repositoryFileCopy:function(e,t){return this.io("/r/repository/file/copy",e,t)},repositoryFileMove:function(e,t){return this.io("/r/repository/file/move",e,t)},repositoryDirectoryList:function(e,t){return this.io("/r/repository/directory/list",e,t)},repositoryDirectoryCreate:function(e,t){return this.io("/r/repository/directory/create",e,t)},repositoryDirectoryRename:function(e,t){return this.io("/r/repository/directory/rename",e,t)},repositoryDirectoryCopy:function(e,t){return this.io("/r/repository/directory/copy",e,t)},repositoryDirectoryMove:function(e,t){return this.io("/r/repository/directory/move",e,t)},repositoryDirectoryUpdate:function(e,t){return this.io("/r/repository/directory/update",e,t)},repositoryDirectoryArchive:function(e,t){return this.io("/r/repository/directory/archive",e,t)},repositoryDirectoryUpload:function(e,t){e=e||{},e.format="text";({data:e,method:"POST",form:{id:e.formId},on:t});return this.io("/r/repository/directory/upload",e,t)},repositoryDirectoryDownload:function(e,t){return this.io("/r/repository/directory/download",e,t)},repositoryDirectoryDelete:function(e,t){return this.io("/r/repository/directory/delete",e,t)},jobList:function(e,t){return this.io("/r/job/list",e,t)},jobSubmit:function(e,t){return this.io("/r/job/submit",e,t)},jobSchedule:function(e,t){return this.io("/r/job/schedule",e,t)},jobQuery:function(e,t){return this.io("/r/job/query",e,t)},jobCancel:function(e,t){return this.io("/r/job/list",e,t)},jobDelete:function(e,t){return this.io("/r/job/delete",e,t)}}},t.exports=u},{"../package":38,"./lang":26,"./rinput":30,"./selfish":33}],23:[function(e,t,r){function i(e){}var o=e("./selfish").Base;t.exports=o.extend({initialize:function(){this.events={},this.scope=null},on:function(e,t){return e in this.events==!1&&(this.events[e]=[]),this.events[e].push(t),i('Emitter.on("'+e+'")'),this},emit:function(e){if(e in this.events==!1)return this;for(var t=0;t<this.events[e].length;t++)i('Fired event: "'+e+'"'),this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1));return this},offAll:function(e){if(e){if(e in this.events==!1)return this;delete this.events[e]}else for(var t in this.events)delete this.events[t];return this},offAt:function(e,t){var r=this.events[e],i=r.slice(t+1);r.length=t,r.push.apply(r,i),this.events[e]=r},off:function(e,t){if(e in this.events==!1)return this;if(!t)return this.offAll(e);for(var r=0;r<this.events[e].length;r++)if(this.events[e][r]==t)return this.offAt(e,r),this;return this}})},{"./selfish":33}],24:[function(e,t,r){function i(e,t){for(var r=[],i=0;i<e.length;i++)r.push(o(e[i],t));return r}function o(e,t){function r(e,t,r){for(var i=""+Math.abs(e),o=e>=0;i.length<t;)i="0"+i;return(o?r?"+":"":"-")+i}var i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),s=e.getHours(),a=e.getMinutes(),u=e.getSeconds(),c=e.getTimezoneOffset(),l="";if(o=10>o?"0"+o:o,s=10>s?"0"+s:s,a=10>a?"0"+a:a,u=10>u?"0"+u:u,l=i+"-"+o+"-"+n,t===h.RPOSIX_DATE||t===h.RPOSIX_DATE_VECTOR){var p=s+":"+a+":"+u,f=-c,d="+";0>f&&(f=-f,d="-"),c=d+r(f/60,2)+""+r(f%60,2),l+=" "+p+" "+c}return l}function n(e,t){for(var r=e.value,s=0;s<r.length;s++){var a=r[s];a.type===h.RDATAFRAME?t=n(a,t):(c.isDate(a.type)&&(a.value=u.isArray(a.value)?i(a.value,a.type):o(a.value,a.type)),a.type=c.deployrToR(a.type),t.value.push(a))}return t}function s(e){for(var t={type:l.DATAFRAME,value:[],name:e.name},r=e.value,s=0;s<r.length;s++){var a=r[s];a.type===h.RDATAFRAME?t=n(a,t):(c.isDate(a.type)&&(a.value=u.isArray(a.value)?i(a.value,a.type):o(a.value,a.type)),a.type=c.deployrToR(a.type),t.value.push(a))}return t}function a(e){for(var t,r={type:l.LIST,value:[],name:e.name},n=e.value,u=0;u<n.length;u++){var c=n[u];switch(c.type){case h.RDATAFRAME:t=s(c);break;case h.RLIST:t=a(c);break;case h.RNUMERIC_MATRIX:case h.RINTEGER_MATRIX:case h.RBOOLEAN_MATRIX:case h.RSTRING_MATRIX:t={name:c.name,type:l.MATRIX,value:c.value};break;case h.RDATE:case h.RPOSIX_DATE:t={name:c.name,type:l.DATE,format:c.format,value:o(c.value,c.type)};break;case h.RFACTOR:case h.RORDERED:t={name:c.name,type:l.FACTOR,ordered:c.ordered,labels:c.labels,levels:c.levels,value:c.value};break;case h.RSTRING:case h.RBOOLEAN:case h.RNUMERIC:case h.RINTEGER:t={name:c.name,type:l.PRIMITIVE,value:c.value};break;case h.RNUMERIC_VECTOR:case h.RINTEGER_VECTOR:case h.RBOOLEAN_VECTOR:case h.RSTRING_VECTOR:t={name:c.name,type:l.VECTOR,value:c.value};break;case h.RDATE_VECTOR:case h.RPOSIX_DATE_VECTOR:t={name:c.name,type:l.VECTOR,value:i(c.value,c.type),format:c.format};break;default:throw new Error('No RDataType found for "'+c.type+'"')}r.value.push(t)}return r}var u=e("./lang"),c=e("./rtypes"),l=c.r,h=c.deployr;t.exports={encode:function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];switch(n.type){case h.RDATAFRAME:t[n.name]=s(n);break;case h.RLIST:t[n.name]=a(n);break;case h.RNUMERIC_MATRIX:case h.RINTEGER_MATRIX:case h.RBOOLEAN_MATRIX:case h.RSTRING_MATRIX:t[n.name]={type:l.MATRIX,value:n.value};break;case h.RDATE:case h.RPOSIX_DATE:t[n.name]={type:l.DATE,format:n.format,value:o(n.value,n.type)};break;case h.RFACTOR:case h.RORDERED:t[n.name]={type:l.FACTOR,ordered:n.ordered,labels:n.labels,levels:n.levels,value:n.value};break;case h.RSTRING:case h.RBOOLEAN:case h.RNUMERIC:case h.RINTEGER:t[n.name]={type:l.PRIMITIVE,value:n.value};break;case h.RNUMERIC_VECTOR:case h.RINTEGER_VECTOR:case h.RBOOLEAN_VECTOR:case h.RSTRING_VECTOR:t[n.name]={type:l.VECTOR,value:n.value};break;case h.RDATE_VECTOR:case h.RPOSIX_DATE_VECTOR:t[n.name]={type:l.VECTOR,value:i(n.value,n.type),format:n.format};break;default:throw new Error('No RDataType found for "'+n.type+'"')}}return JSON.stringify(t)}}},{"./lang":26,"./rtypes":32}],25:[function(e,t,r){var i=e("./optional"),o=i("ws"),n=e("./queue"),s=e("./emitter"),a=e("./selfish").Base,u=e("./utils").merge,c=a.extend(s,{initialize:function(e,t){s.initialize.call(this,{}),this.host=e,this.options=t||{},this.options.log=this.options.log||this.LOG.error,this.ws=null,this.q=new n,this.channel={}},LOG:{info:"info",debug:"debug",error:"error"},open:function(e){var t=this,r=(this.host||"")+"/deployr/r/event/stream?",i=[];return e=e||{},e.headers=e.headers||{},e=this.options=u(e,this.channel),this.cookies=this.cookies?this.cookies:e.headers.Cookie,e.project?i.push("project="+e.project):e.job&&i.push("job="+e.job),e.management?i.push("managementEventOnly=true"):e.httponly?i.push("httpEventOnly=true"):e.revoonly&&i.push("revoEventOnly=true"),r+=i.join("&").substr(0),r=r.replace(/^http/,"ws"),this.q["yield"](!0),this.q.add(function(){var e=this.cookies?{Cookie:this.cookies}:{};this.emit("es:connecting",{uri:r,headers:e});var i=new o(r,"http",{headers:e});i.onopen=function(e){t.emit("es:open",e)};var n="";i.onmessage=function(e){try{if(e.data.split("!|!")[1]){n+=e.data.split("!|!")[1],e=JSON.parse(n),n="";var r=e.deployr.response.event.type;t.emit("es:"+r.replace("Event",""),e)}}catch(i){}},i.onerror=function(e){t.emit("es:error",e)},i.onclose=function(e){t.emit("es:disconnect",e)},this.ws=i},this),e.force&&this.flush(),this},close:function(){return this.ws&&this.ws.close(),this},error:function(e){return this.on("es:error",e),this},all:function(){return this.channel={revoonly:!0},this},session:function(){return this.channel={httponly:!0},this},project:function(e){return this.channel={project:e},this},job:function(e){return this.channel={job:e},this},management:function(){return this.channel={management:!0},this},flush:function(){this.q["yield"](!1),this.q.flush()},share:function(e){this.cookies=e}});t.exports=c},{"./emitter":23,"./optional":28,"./queue":29,"./selfish":33,"./utils":34}],26:[function(e,t,r){var i={},o=Object.prototype.toString,n={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},s=!1;i.isNull=function(e){return null===e},i.isUndefined=function(e){return"undefined"==typeof e},i.isObject=function(e,t){var r=typeof e;return e&&("object"===r||!t&&("function"===r||i.isFunction(e)))||!1},i.isArray=!s&&Array.isArray||function(e){return"array"===i.type(e)},i.isFunction=function(e){return"function"==typeof e},i.isBoolean=function(e){return"boolean"==typeof e},i.isDate=function(e){return"date"===i.type(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)},i.isNumber=function(e){return"number"==typeof e&&isFinite(e)},i.isString=function(e){return"string"==typeof e},i.type=function(e){return n[typeof e]||n[o.call(e)]||(e?"object":"null")},t.exports=i},{}],27:[function(e,t,r){function i(e,t){function r(e){var t="==================================================================================================================\n",r=0;return r=e===s.DEBUG||e===s.ERROR?8:e===s.INFO||e===s.WARN?8:7,{start:t.substring(r),end:t}}if(console){var i,o=Array.prototype.slice.call(e,0),n=t.name,a=t.level===s.ERROR,u=r(t.level);i=t.level===s.WARN&&console.warn?"warn":t.level===s.ERROR&&console.error?"error":t.level===s.INFO&&console.info?"info":"log",o.unshift("["+(a?s.ERROR.name:n)+"] "+u.start),o.push(u.end),console[i](o[0],[o[1]+" ---> "+o[2].call]);for(var c=2;c<o.length;c++)console.log(o[c])}}function o(e,t,r){this.id=e,this.context=t||s.DEBUG}var n,s={},a={};o.prototype={log:function(e,t){e.value>=this.context.value&&i(t,{level:e,name:this.context.name,value:this.context.value})},debug:function(){this.log(s.DEBUG,arguments)},error:function(){this.log(s.ERROR,arguments)},info:function(){this.log(s.INFO,arguments)},warn:function(){this.log(s.WARN,arguments)},setLevel:function(e){e&&"value"in e&&(this.context=e)}},s.DEBUG={value:1,name:"DEBUG"},s.INFO={value:2,name:"INFO"},s.WARN={value:4,name:"WARN"},s.ERROR={value:8,name:"ERROR"},s.OFF={value:99,name:"OFF"},s.setLevel=function(e){n.setLevel(e)},s.debug=function(){n.debug.apply(n,arguments)},s.info=function(){n.info.apply(n,arguments)},s.warn=function(){n.warn.apply(n,arguments)},s.error=function(){n.error.apply(n,arguments)},s.get=function(e,t,r){return a[e]||function(){return a[e]=new o(e,t,r),a[e]}()},n=s.get("global"),t.exports=s},{}],28:[function(e,t,r){t.exports=function(t){try{return e(t)}catch(r){}}},{}],29:[function(e,t,r){function i(){this.emptyCallback=null,this.callbacks=[],this.yielded=!1,this.response=null,this.responseChain=[]}i.prototype={add:function(e,t,r){this.yielded||r?this.callbacks.push({fn:e,ctx:t}):e.apply(t||this,[this.response])},size:function(){return this.callbacks.length},isEmpty:function(){return 0===this.callbacks.length},empty:function(e,t){this.emptyCallback={fn:e,ctx:t}},"yield":function(e){this.yielded=e},take:function(e,t,r){var i;e&&(this.response=e,this.responseChain.push(e)),!this.yielded&&this.callbacks[0]&&(i=this.callbacks.shift(),i.fn.apply(i.ctx||this,[this.responseChain,t,r]),this.callbacks[0]&&this.emptyCallback&&this.emptyCallback.fn.call(this.emptyCallback.ctx||this))},flush:function(e,t,r){for(e&&(this.response=e,this.responseChain.push(e));this.callbacks[0]&&!this.yielded;){var i=this.callbacks.shift();i.fn.apply(i.ctx||this,[this.responseChain,t,r]),this.callbacks[0]&&this.emptyCallback&&this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}},t.exports=i},{}],30:[function(e,t,r){var i=e("./selfish").Base,o=e("./rtypes");t.exports=i.extend(o,{initialize:function(e,t,r){this.name=e,this.value=t,this.options=r||{}},numeric:function(){return this.assert({type:this.deployr.RNUMERIC,name:this.name,value:this.value,toString:this.toString})},integer:function(){return this.assert({type:this.deployr.RINTEGER,name:this.name,value:this.value,toString:this.toString})},logical:function(){return this.assert({type:this.deployr.RBOOLEAN,name:this.name,value:this.value,toString:this.toString})},character:function(){return this.assert({type:this.deployr.RSTRING,name:this.name,value:this.value,toString:this.toString})},date:function(){return this.assert({type:this.deployr.RDATE,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixct:function(){return this.assert({type:this.deployr.RPOSIX_DATE,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},numericVector:function(){return this.assert({type:this.deployr.RNUMERIC_VECTOR,name:this.name,value:this.value,toString:this.toString})},integerVector:function(){return this.assert({type:this.deployr.RINTEGER_VECTOR,name:this.name,value:this.value,toString:this.toString})},logicalVector:function(){return this.assert({type:this.deployr.RBOOLEAN_VECTOR,name:this.name,value:this.value,toString:this.toString})},characterVector:function(){return this.assert({type:this.deployr.RSTRING_VECTOR,name:this.name,value:this.value,toString:this.toString})},dateVector:function(){return this.assert({type:this.deployr.RDATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixctVector:function(){return this.assert({type:this.deployr.RPOSIX_DATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},list:function(){return this.assert({type:this.deployr.RLIST,name:this.name,value:this.value,toString:this.toString})},dataframe:function(){return this.assert({type:this.deployr.RDATAFRAME,name:this.name,value:this.value,toString:this.toString})},factor:function(){var e=this.options;return this.assert({type:this.deployr.RFACTOR,name:this.name,value:this.value,ordered:!1,levels:e.levels,labels:e.labels,toString:this.toString})},ordered:function(){var e=this.options;return this.assert({type:this.deployr.RORDERED,name:this.name,value:this.value,ordered:!0,levels:e.levels,labels:e.labels,toString:this.toString})},numericMatrix:function(){return this.assert({type:this.deployr.RNUMERIC_MATRIX,name:this.name,value:this.value,toString:this.toString})},integerMatrix:function(){return this.assert({type:this.deployr.RINTEGER_MATRIX,name:this.name,value:this.value,toString:this.toString})},logicalMatrix:function(){return this.assert({type:this.deployr.RBOOLEAN_MATRIX,name:this.name,value:this.value,toString:this.toString})},characterMatrix:function(){return this.assert({type:this.deployr.RSTRING_MATRIX,name:this.name,value:this.value,toString:this.toString})},toString:function(){var e=this.options||{},t=e.levels?"[ levels = "+e.levels+"]":"",r=e.labels?"[ labels = "+e.labels+"]":"";return"[ name = "+this.name+" ] [ value = "+this.value+" ] [ type = "+this.type+" ] "+t+r}})},{"./rtypes":32,"./selfish":33}],31:[function(e,t,r){function i(e,t,r,i){var o;if(s.isObject(t)){if(o=t,!o.type!==e)throw new Error('IllegalArgumentError:Expecting "'+e+'" but found "'+o.type+'"')}else o=a["new"](t,r,i)[e]();return o}var o=e("./selfish").Base,n=e("./rtypes"),s=e("./lang"),a=e("./rinput");t.exports=o.extend(n,{numeric:function(e,t){return this.inputs.push(i(this.deployr.RNUMERIC,e,t)),this},integer:function(e,t){return this.inputs.push(i(this.deployr.RINTEGER,e,t)),this},logical:function(e,t){return this.inputs.push(i(this.deployr.RBOOLEAN,e,t)),this},character:function(e,t){return this.inputs.push(i(this.deployr.RSTRING,e,t)),this},date:function(e,t){return this.inputs.push(i(this.deployr.RDATE,e,t)),this},posixct:function(e,t){return this.inputs.push(i(this.deployr.RPOSIX_DATE,e,t)),this},numericVector:function(e,t){return this.inputs.push(i(this.deployr.RNUMERIC_VECTOR,e,t)),this},integerVector:function(e,t){return this.inputs.push(i(this.deployr.RINTEGER_VECTOR,e,t)),this},logicalVector:function(e,t){return this.inputs.push(i(this.deployr.RBOOLEAN_VECTOR,e,t)),this},characterVector:function(e,t){return this.inputs.push(i(this.deployr.RSTRING_VECTOR,e,t)),this},dateVector:function(e,t){return this.inputs.push(i(this.deployr.RDATE_VECTOR,e,t)),this},posixctVector:function(e,t){return this.inputs.push(i(this.deployr.RPOSIX_DATE_VECTOR,e,t)),this},list:function(e,t){return this.inputs.push(i(this.deployr.RLIST,e,t)),this},dataframe:function(e,t){return this.inputs.push(i(this.deployr.RDATAFRAME,e,t)),this},factor:function(e,t,r,o){var n={levels:r,labels:o};return this.inputs.push(i(this.deployr.RFACTOR,e,t,n)),this},ordered:function(e,t,r,o){var n={levels:r,labels:o};return this.inputs.push(i(this.deployr.RORDERED,e,t,n)),this},numericMatrix:function(e,t){return this.inputs.push(i(this.deployr.RNUMERIC_MATRIX,e,t)),this},integerMatrix:function(e,t){return this.inputs.push(i(this.deployr.RINTEGER_MATRIX,e,t)),this},logicalMatrix:function(e,t){return this.inputs.push(i(this.deployr.RBOOLEAN_MATRIX,e,t)),this},characterMatrix:function(e,t){return this.inputs.push(i(this.deployr.RSTRING_MATRIX,e,t)),this}})},{"./lang":26,"./rinput":30,"./rtypes":32,"./selfish":33}],32:[function(e,t,r){var i=e("./selfish").Base,o=e("./lang"),n={};t.exports=i.extend({r:{PRIMITIVE:"primitive",DATAFRAME:"dataframe",LIST:"list",MATRIX:"matrix",DATE:"date",FACTOR:"factor",VECTOR:"vector"},deployr:{RBOOLEAN:"logical",RNUMERIC:"numeric",RINTEGER:"integer",RSTRING:"character",RDATE:"date",RPOSIX_DATE:"posixct",RBOOLEAN_VECTOR:"logicalVector",RNUMERIC_VECTOR:"numericVector",RINTEGER_VECTOR:"integerVector",RSTRING_VECTOR:"characterVector",RDATE_VECTOR:"dateVector",RPOSIX_DATE_VECTOR:"posixctVector",RLIST:"list",RDATAFRAME:"dataframe",RFACTOR:"factor",RORDERED:"ordered",RBOOLEAN_MATRIX:"logicalMatrix",RNUMERIC_MATRIX:"numericMatrix",RINTEGER_MATRIX:"integerMatrix",RSTRING_MATRIX:"characterMatrix"},isDate:function(e){return e===this.deployr.RDATE||e===this.deployr.RPOSIX_DATE||e===this.deployr.RDATE_VECTOR||e===this.deployr.RPOSIX_DATE_VECTOR||e===this.r.DATE},deployrToR:function(e){var t=this.deployr,r=this.r;return n[e]||(n[t.RBOOLEAN]=r.PRIMITIVE,n[t.RNUMERIC]=r.PRIMITIVE,n[t.RINTEGER]=r.PRIMITIVE,n[t.RSTRING]=r.PRIMITIVE,n[t.RDATE]=r.DATE,n[t.RPOSIX_DATE]=r.DATE,n[t.RBOOLEAN_VECTOR]=r.VECTOR,n[t.RNUMERIC_VECTOR]=r.VECTOR,n[t.RINTEGER_VECTOR]=r.VECTOR,n[t.RSTRING_VECTOR]=r.VECTOR,n[t.RDATE_VECTOR]=r.VECTOR,n[t.RPOSIX_DATE_VECTOR]=r.VECTOR,n[t.RLIST]=r.LIST,n[t.RDATAFRAME]=r.DATAFRAME,n[t.RFACTOR]=r.FACTOR,n[t.RORDERED]=r.FACTOR,n[t.RBOOLEAN_MATRIX]=r.MATRIX,n[t.RNUMERIC_MATRIX]=r.MATRIX,n[t.RINTEGER_MATRIX]=r.MATRIX,n[t.RSTRING_MATRIX]=r.MATRIX),n[e]},
assert:function(e){var t,r=this.deployr,i=null,n=e.value;n=o.isArray(n)?n:[n];for(var s=0;s<n.length;s++){var a=n[s];switch(e.type){case r.RNUMERIC:case r.RNUMERIC_VECTOR:case r.RNUMERIC_VECTOR:t=o.isNumber;var u=parseFloat(a);a=isNaN(u)?a:u;break;case r.RINTEGER:case r.RINTEGER_VECTOR:t=o.isNumber;var u=parseFloat(a);a=isNaN(u)?a:u;break;case r.RBOOLEAN:case r.RBOOLEAN_VECTOR:t=o.isBoolean;break;case r.RSTRING:case r.RSTRING_VECTOR:t=o.isString;break;case r.RDATE:case r.RPOSIX_DATE:case r.RDATE_VECTOR:case r.RPOSIX_DATE_VECTOR:t=o.isDate;break;case r.RFACTOR:case r.RORDERED:case r.RDATAFRAME:case r.RINTEGER_MATRIX:case r.RBOOLEAN_MATRIX:case r.RSTRING_MATRIX:t=i}if(t&&!t(a))throw new Error('RInputFormatError: "'+a+'" is not a valid "'+e.type+'" type.')}return e}})},{"./lang":26,"./selfish":33}],33:[function(t,r,i){!("function"!=typeof e?function(e){e(null,"undefined"!=typeof i?i:window)}:e)(function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function(){var e=Object.create(this);return e.initialize.apply(e,arguments),e}},initialize:{value:function(){}},merge:{value:function(){var e={};return Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})}),Object.defineProperties(this,e),this}},extend:{value:function(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],34:[function(e,t,r){var i=e("./lang"),o=r.get=function(e,t){function r(e,t,i){for(var o in e){var n=t.apply(this,[o,e[o],i]);if(n)return n;e[o]instanceof Object&&!(e[o]instanceof Array)&&r(e[o],t,o)}}function o(e,t){var i={};return r(e,function(e,r,o){return e===t?i=r:null}),i}function n(e){for(var t in e)if(e.hasOwnProperty(t))return e;return i.isObject(e)?null:e}return n(o(e,t))},n=r.inArray=function(e,t,r){var i,o=e.length;for(i=0;o>i;i++)if(r){if(e[i][r]===t)return e[i]}else if(e[i]===t)return e[i];return null};r.merge=function(e,t){e&&"object"==typeof e||(e={}),t&&"object"==typeof t||(t={});for(var r in t)e[r]=t[r];return e},r.workspace=function(e,t){var r=o(e,"workspace");return r?t?n(r.objects,t,"name"):r.objects||r.object:null},r.signature=function(){var e,t=Array.prototype.slice.call(arguments[0],0),r=t.length,o=!1,n={};if(1===r&&i.isObject(t[0]))n=t[0],e=n.project?"/r/project/execute/script":"/r/repository/script/execute";else if(1===r&&i.isString(t[0]))t=t[0].split("/"),e="/r/repository/script/execute",n={author:t[1],directory:t[2],filename:t[3]};else if(2===r){var s=t[1];e=s?"/r/project/execute/script":"/r/repository/script/execute",t=t[0].split("/"),n={project:s,author:t[1],directory:t[2],filename:t[3]}}else r>2&&(n={author:t[2],directory:t[1],filename:t[0]});return n.project&&i.isBoolean(n.project)&&(delete n.project,o=!0),{api:e,opts:n,create:o}}},{"./lang":26}],35:[function(e,t,r){function i(){}function o(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function n(){if(v.XMLHttpRequest&&("file:"!=v.location.protocol||!v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function s(e){return e===Object(e)}function a(e){if(!s(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function u(e){for(var t,r,i={},o=e.split("&"),n=0,s=o.length;s>n;++n)r=o[n],t=r.split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return i}function c(e){var t,r,i,o,n=e.split(/\r?\n/),s={};n.pop();for(var a=0,u=n.length;u>a;++a)r=n[a],t=r.indexOf(":"),i=r.slice(0,t).toLowerCase(),o=g(r.slice(t+1)),s[i]=o;return s}function l(e){return e.split(/ *; */).shift()}function h(e){return m(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),i=r.shift(),o=r.shift();return i&&o&&(e[i]=o),e},{})}function p(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function f(e,t){var r=this;y.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new p(r)}catch(i){e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=i}r.callback(e,t)})}function d(e,t){return"function"==typeof t?new f("GET",e).end(t):1==arguments.length?new f("GET",e):new f(e,t)}var y=e("emitter"),m=e("reduce"),v="undefined"==typeof window?this:window,g="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=a,d.parseString=u,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},p.prototype.get=function(e){return this.header[e.toLowerCase()]},p.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var r=h(t);for(var i in r)this[i]=r[i]},p.prototype.parseBody=function(e){var t=d.parse[this.type];return t&&e&&e.length?t(e):null},p.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},p.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,i="cannot "+t+" "+r+" ("+this.status+")",o=new Error(i);return o.status=this.status,o.method=t,o.url=r,o},d.Response=p,y(f.prototype),f.prototype.use=function(e){return e(this),this},f.prototype.timeout=function(e){return this._timeout=e,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(e,t){if(s(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},f.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},f.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},f.prototype.type=function(e){return this.set("Content-Type",d.types[e]||e),this},f.prototype.accept=function(e){return this.set("Accept",d.types[e]||e),this},f.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},f.prototype.query=function(e){return"string"!=typeof e&&(e=a(e)),e&&this._query.push(e),this},f.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},f.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},f.prototype.send=function(e){var t=s(e),r=this.getHeader("Content-Type");if(t&&s(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},f.prototype.callback=function(e,t){var r=this._callback;return this.clearTimeout(),2==r.length?r(e,t):e?this.emit("error",e):void r(t)},f.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},f.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(e){var t=this,r=this.xhr=n(),s=this._query.join("&"),a=this._timeout,u=this._formData||this._data;if(this._callback=e||i,r.onreadystatechange=function(){return 4==r.readyState?0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end"):void 0},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),a&&!this._timer&&(this._timer=setTimeout(function(){t.abort()},a)),s&&(s=d.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!o(u)){var c=d.serialize[this.getHeader("Content-Type")];c&&(u=c(u))}for(var l in this.header)null!=this.header[l]&&r.setRequestHeader(l,this.header[l]);return this.emit("request",this),r.send(u),this},d.Request=f,d.get=function(e,t,r){var i=d("GET",e);return"function"==typeof t&&(r=t,t=null),t&&i.query(t),r&&i.end(r),i},d.head=function(e,t,r){var i=d("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&i.send(t),r&&i.end(r),i},d.del=function(e,t){var r=d("DELETE",e);return t&&r.end(t),r},d.patch=function(e,t,r){var i=d("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&i.send(t),r&&i.end(r),i},d.post=function(e,t,r){var i=d("POST",e);return"function"==typeof t&&(r=t,t=null),t&&i.send(t),r&&i.end(r),i},d.put=function(e,t,r){var i=d("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&i.send(t),r&&i.end(r),i},t.exports=d},{emitter:36,reduce:37}],36:[function(e,t,r){function i(e){return e?o(e):void 0}function o(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function r(){i.off(e,r),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,o=0;o<r.length;o++)if(i=r[o],i===t||i.fn===t){r.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var i=0,o=r.length;o>i;++i)r[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],37:[function(e,t,r){t.exports=function(e,t,r){for(var i=0,o=e.length,n=3==arguments.length?r:e[i++];o>i;)n=t.call(null,n,e[i],++i,e);return n}},{}],38:[function(e,t,r){t.exports={name:"deployr",version:"7.4.1",description:"Simplified JavaScript client library for making requests to DeployR.",keywords:["deployr","deployr.io","ajax","R","api","simple"],author:{name:"DeployR - Revolution Analytics Inc."},contributors:[{name:"Sean Wells"}],repository:{type:"git",url:"git://github.com/deployr/js-client-library.git"},homepage:"http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc",scripts:{start:"gulp start",build:"gulp"},devDependencies:{browserify:"^9.0.3",gulp:"^3.8.11","gulp-connect":"^2.2.0","gulp-header":"^1.2.2","gulp-jshint":"^1.9.2","gulp-livereload":"^3.8.0","gulp-plumber":"^0.6.6","gulp-uglifyjs":"^0.6.0","gulp-util":"^3.0.4",tape:"^3.5.0","vinyl-source-stream":"^1.0.0"},dependencies:{"d.js":"^0.6.0",superagent:"^0.21.0",ws:"^0.4.32"},main:"deployr.js",engines:{node:">= 0.10.0"},license:"Apache 2.0 License",bugs:{url:"https://github.com/deployr/js-client-library/issues"},directories:{example:"examples",test:"test"},gitHead:"3c955e1898bedfaf562b0b751674c4ebf7d602f6",_id:"deployr@7.4.1",_shasum:"3cc53c6cea2366525e21898bb6005f42e979b4e3",_from:"deployr@>=7.4.1 <8.0.0",_npmVersion:"1.4.28",_npmUser:{name:"swells",email:"sean.wells.sc@gmail.com"},maintainers:[{name:"swells",email:"sean.wells.sc@gmail.com"}],dist:{shasum:"3cc53c6cea2366525e21898bb6005f42e979b4e3",tarball:"http://registry.npmjs.org/deployr/-/deployr-7.4.1.tgz"},_resolved:"https://registry.npmjs.org/deployr/-/deployr-7.4.1.tgz",readme:"ERROR: No README data found!"}},{}],39:[function(e,t,r){t.exports=e("./lib/enum")},{"./lib/enum":40}],40:[function(t,r,i){(function(t){!function(e,t,r,i){"use strict";function o(e,t){this.key=e,this.value=t}function n(e,t){function r(){for(var e=0,t=a.enums.length;t>e;e++){var r=a.enums[e];if(0===r.value||r.value&r.value-1)return!1}return!0}if(t&&"string"==typeof t&&(t={name:t}),this._options=t||{},this._options.separator=this._options.separator||" | ",this.enums=[],e.length){var i=e;e={};for(var n=0;n<i.length;n++)e[i[n]]=Math.pow(2,n)}for(var s in e){if(this._options.name&&"name"===s||"_options"===s||"get"===s||"getKey"===s||"getValue"===s||"enums"===s||"isFlaggable"===s)throw new Error('Enum key "'+s+'" is a reserved word!');this[s]=new o(s,e[s]),this.enums.push(this[s])}this._options.name&&(this.name=this._options.name);var a=this;this.isFlaggable=r(),this.freezeEnums()}o.prototype={constructor:o,has:function(e){return e instanceof o||"object"==typeof e&&void 0!==e.key&&void 0!==e.value?0!==(this.value&e.value):"string"==typeof e?this.key.indexOf(e)>=0:0!==(this.value&e)},is:function(e){return e instanceof o||"object"==typeof e&&void 0!==e.key&&void 0!==e.value?this.key===e.key:"string"==typeof e?this.key===e:this.value===e},toString:function(){return this.key},toJSON:function(){return this.key},valueOf:function(){return this.key}},n.prototype={constructor:n,getKey:function(e){var t=this.get(e);return t?t.key:"Undefined"},getValue:function(e){var t=this.get(e);return t?t.value:null},get:function(e){if(null===e||void 0===e)return null;if(e instanceof o||"object"==typeof e&&void 0!==e.key&&void 0!==e.value){var t=this.enums.indexOf(e);return t>=0?e:!this.isFlaggable||this.isFlaggable&&e.key.indexOf(this._options.separator)<0?null:this.get(e.key)}if("string"==typeof e){if(e.indexOf(this._options.separator)>0){for(var r=e.split(this._options.separator),i=0,n=0;n<r.length;n++){var s=r[n];i|=this[s].value}return new o(e,i)}return this[e]}for(var a in this)if(this.hasOwnProperty(a)&&this[a].value===e)return this[a];var u=null;if(this.isFlaggable)for(var c in this)this.hasOwnProperty(c)&&0!==(e&this[c].value)&&(u?u+=this._options.separator:u="",u+=c);return this.get(u||null)},freezeEnums:function(){function e(e){var t=Object.getOwnPropertyNames(e);return t.forEach(function(t){Object.getOwnPropertyDescriptor(e,t).configurable&&Object.defineProperties(e,t,{writable:!1,configurable:!1})}),e}function t(e){return e}function r(i){if("object"==typeof i&&null!==i&&!Object.isFrozen(i)&&!Object.isSealed(i)){for(var o in i)i.hasOwnProperty(o)&&(i.__defineGetter__(o,t.bind(null,i[o])),i.__defineSetter__(o,function(e){throw TypeError("Cannot redefine property; Enum Type is not extensible.")}),r(i[o]));Object.freeze?Object.freeze(i):e(i)}}return r(this),this}},t&&t.exports?t.exports=n:i?i(function(){return n}):e.Enum=n,t&&t.exports&&r&&(n.register=function(e){e=e||"Enum",r[e]||(r[e]=n)})}(this,"undefined"!=typeof r?r:void 0,"undefined"!=typeof t?t:void 0,"undefined"!=typeof e?e:void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,r){!function(e){function r(e,t){if("object"!==o(e))return t;for(var i in t)e[i]="object"===o(e[i])&&"object"===o(t[i])?r(e[i],t[i]):t[i];return e}function i(e,t,i){var s=i[0],a=i.length;(e||"object"!==o(s))&&(s={});for(var u=0;a>u;++u){var c=i[u],l=o(c);if("object"===l)for(var h in c){var p=e?n.clone(c[h]):c[h];s[h]=t?r(s[h],p):p}}return s}function o(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var n=function(e){return i(e===!0,!1,arguments)},s="merge";n.recursive=function(e){return i(e===!0,!0,arguments)},n.clone=function(e){var t,r,i=e,s=o(e);if("array"===s)for(i=[],r=e.length,t=0;r>t;++t)i[t]=n.clone(e[t]);else if("object"===s){i={};for(t in e)i[t]=n.clone(e[t])}return i},e?t.exports=n:window[s]=n}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],42:[function(t,r,i){!("function"!=typeof e?function(e,t){t(null,"undefined"!=typeof i?i:window)}:e)("selfish",function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function(){var e=Object.create(this);return e.initialize.apply(e,arguments),e}},initialize:{value:function(){}},merge:{value:function(){var e={};return Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})}),Object.defineProperties(this,e),this}},extend:{value:function(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}]},{},[1])(1)});